---
import type { HTMLAttributes } from "astro/types";

import Field, { type Props as FieldProps } from "../Field/index.astro";
import EmailInput from "../elements/EmailInput/index.astro";

import generateShortId from "../../utilities/generateShortId/index.ts";

export type Props = HTMLAttributes<"input"> & FieldProps;

const {
  help,
  helpProps,
  id = generateShortId(),
  label,
  labelProps,
  wrapperProps,
  ...props
} = Astro.props;
---

<Field {...props} {help} {helpProps} {label} {labelProps} {wrapperProps}>
  {
    (labelledBy: string) => {
      return <EmailInput {id} {labelledBy} {...props} />;
    }
  }
</Field>
